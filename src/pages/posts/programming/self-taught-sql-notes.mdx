---
title: Self-Taught SQL Notes üìù
topic: programming
routename: self-taught-sql-notes
description: Organized notes compiled from my journey of teaching myself SQL.
postnum: 8
---

import Image from 'next/image'
import Link from 'next/link'

export const meta = {
  title: 'Self-Taught SQL Notes üìù',
  description:
    'Organized notes compiled from my journey of teaching myself SQL.',
  url: 'https://parkerlandon.com/posts/programming/self-taught-sql-notes',
  titleAppendSiteName: true,
  ogImage: {
    url:
      'https://adoring-jackson-1187ff.netlify.app/.netlify/functions/gen-opengraph-image?title=Self-Taught%20SQL%20Notes&tags=SQL,PostgreSQL',
    width: 1200,
    height: 630,
  },
}

<Image
  src="/images/posts/self-taught-sql-notes/image.png"
  width="1024"
  height="480"
  layout="responsive"
/>

## üìó w3schools SQL Tutorial

The following information comes from the [w3schools SQL Tutorial found here](https://www.w3schools.com/sql/default.asp).

### Definitions

- **SQL**: Structured Query Language
- **RDBMS**: Relational Database Management System
  - **Table**: A collection of related data entries. Consists of columns and rows. Broken up into fields.
  - **Field**: A column in a table that is designed to maintain specific information about every record in the table.
  - **Record**: Each individual entry that exists in a table. Also called a row.
  - **Database**: Contains one or more tables.
- **Statements**: Actions performed on a database.
  - Some of the most important SQL Statements:
    - **SELECT**: Extracts data from a database.
    - **UPDATE**: Updates data in a database.
    - **DELETE**: Deletes data from a database.
    - **INSERT INTO**: Inserts new data into a database.
    - **CREATE DATABASE**: Creates a new database.
    - **ALTER DATABASE**: Modifies a database.
    - **CREATE TABLE**: Creates a new table.
    - **ALTER TABLE**: Modifies a table.
    - **DROP TABLE**: Deletes a table.
    - **CREATE INDEX**: Creates an index (search key)
    - **DROP INDEX**: Deletes an index.
- **Stored Procedure**: Prepared SQL code that you can save, so the code can be reused over and over again.
- **Indexes**: Used to retrieve data more quickly than otherwise. The user cannot see the indexes, they are just used to speed up searches/queries.
- **Views**: Contain rows and columns, just like a real table. The fields in a view are fields freom one or more tables in the database.

### Keep in mind...

SQL keywords are not case sensitive.

Some database systems require a semicolon at the end of each SQL statement.

SQL requires single quotes around text values (most systems will also allow double quotes).

Numeric fields should not be enclosed in quotes.

To keep your queries simple and easy to maintain, do not allow time components in your dates.

### SELECT Statement

Used to select data from a database.
The data returned is stored in a result table called the **result-set**.

```sql
SELECT column1, column2, ... FROM table_name;
```

column1, column2, ... are the field names of the tables you want to select data from.

To select all fields available in a table, we use `*`:

```sql
SELECT * FROM table_name;
```

### SELECT DISTINCT Statement

Used to return only distinct values.

```sql
SELECT DISTINCT column1 FROM table_name;
```

To list the number of distinct records in a field:

```sql
SELECT COUNT(DISTINCT column1) FROM table_name;
```

### WHERE Clause

Used to filter records. Extracts only those records that fulfill a specified condition.

```sql
SELECT column1, column2, ...
FROM table_name
WHERE condition;
```

Example:

```sql
SELECT * FROM Customers WHERE Country='Mexico';
```

### AND, OR, NOT Operators

The `AND` operator displays a record if all the conditions separated by `AND` are `TRUE`.

The `OR` operator displays a record if any of the conditions separated by `OR` is `TRUE`.

The `NOT` operator displays a record if the condition(s) is `NOT TRUE`.

### AND Syntax

```sql
SELECT column1, column2, ...
FROM table_name
WHERE condition1 AND condition2 AND condition3 ...;
```

### OR Syntax

```sql
SELECT column1, column2, ...
FROM table_name
WHERE condition1 OR condition2 OR condition3 ...;
```

### NOT Syntax

```sql
SELECT column1, column2, ...
FROM table_name
WHERE NOT condition;
```

### ORDER BY Keyword

Used to sort the result-set in ascending or descending order.

By default, sorts in ascending order. To sort the records in descending order, use the `DESC` keyword.

```sql
SELECT column1, column2, ...
FROM table_name
ORDER BY column1, column2, ... ASC|DESC;
```

When using several columns with `ORDER BY`, the result-set is ordered by `column1`, but if some rows have the same `column1`, then it orders them by `column2`.

You can also sort one column by ascending, and another by descending:

```sql
SELECT * FROM table_name
ORDER BY column1 ASC, column2 DESC;
```

### INSERT INTO Statement

Used to insert new records in a table.

It is possible to write the `INSERT INTO` statement in two ways.

The first way specifies both the column names and the values to be inserted:

```sql
INSERT INTO table_name (column1, column2, column3, ...)
VALUES (value1, value2, value3, ...)
```

Records in unspecified columns will have the `NULL` value.

If you are adding values for all the columns of the table, then column names do not need to be specified.

Make sure the order of the values is the same order as the columns in the table.

```sql
INSERT INTO table_name
VALUES (value1, value2, value3, ...)
```

### NULL Values

A field with a `NULL` value is one with no value.

Optional fields will be saved with a `NULL` value if no value is added to the field.

Cannot test for `NULL` values with comparision operators (`=`, `<`, `<>`).

Instead, use the `IS NULL` and `IS NOT NULL` operators.

### IS NULL Syntax

```sql
SELECT column_names
FROM table_name
WHERE column_name IS NULL;
```

### IS NOT NULL Syntax

```sql
SELECT column_names
FROM table_name
WHERE column_name IS NOT NULL;
```

### UPDATE Statement

Used to modify the existing records in a table.

```sql
UPDATE table_name
SET column1 = value1, column2 = value2, ...
WHERE condition;
```

The `WHERE` clause specifies which records should be updated. Without it, **all records are updated**.

### DELETE Statement

Used to delete existing records in a table

```sql
DELETE FROM table_name WHERE condition;
```

The `WHERE` clause specifies which records should be deleted. Without it, **all records are deleted**.

### TOP, LIMIT, or ROWNUM Clause

The `SELECT TOP` clause is used to specify the number of records to return.

Useful on large tables with thousands of records. Returning a large number of records can impact performance.

Not all database systems support the `SELECT TOP` clause. MySQL supports `LIMIT`, while Oracle uses `ROWNUM`.

For an SQL Server or MS Access, the syntax is as follows:

```sql
SELECT TOP number|percent column_name(s)
FROM table_name
WHERE condition;
```

The following selects the first 50% of the records from the "Customers" table:

```sql
SELECT TOP 50 PERCENT * FROM Customers;
```

### MIN() and MAX() Functions

The `MIN()` function returns the smallest value of the selected column.

The `MAX()` function returns the largest value of the selected column.

### MIN() Syntax

```sql
SELECT MIN(column_name)
FROM table_name
WHERE condition;
```

### MAX() Syntax

```sql
SELECT MAX(column_name)
FROM table_name
WHERE condition;
```

### COUNT(), AVG(), and SUM() Functions

The `COUNT()` function returns the number of rows that matches a specified criterion.

The `AVG()` function returns the average value of a numeric column.

The `SUM()` function returns the total sum of a numeric column.

### COUNT() Syntax

```sql
SELECT COUNT(column_name)
FROM table_name
WHERE condition;
```

### AVG() Syntax

```sql
SELECT AVG(column_name)
FROM table_name
WHERE condition;
```

### SUM() Syntax

```sql
SELECT SUM(column_name)
FROM table_name
WHERE condition;
```

### LIKE Operator

Used in a `WHERE` clause to search for a specified pattern in a column.

Two wildcards often used in conjuction with the `LIKE` operator:

1. % - The percent sign represents zero, one, or multiple characters
2. \_ - The underscore represents a single character

(MS Access uses an asterisk instead of a percent sign, and a question mark instead of the underscore)

```sql
SELECT column1, column2, ...
FROM table_name
WHERE columnN LIKE pattern;
```

For example, the following would find any values that start with 'a':

```sql
WHERE CustomerName LIKE 'a%'
```

Can also combine with the `NOT` operator:

```sql
SELECT * FROM Customers
WHERE City NOT LIKE 'a%'
```

### Wildcards

A wildcard character is used to substitute one or more characters in a string.

Used with the `LIKE` operator.

| SQL Server Symbol | MS Access Symbol | Description                                         | Example                                                        |
| ----------------- | ---------------- | --------------------------------------------------- | -------------------------------------------------------------- |
| %                 | \*               | Represents zero or more characters                  | bl% finds bl, black, blue, and blob                            |
| \_                | ?                | Represents a single character                       | h_t finds hot, hat, and hit                                    |
| []                | []               | Represents any single character within the brackets | h[oa]t finds hot and hat, but not hit                          |
| ^                 | !                | Represents any character not in the brackets        | h\[^oa\]t finds hit, but not hot and hat                       |
| -                 | -                | Represents a range of characters                    | c[a-b]t finds cat and cbt                                      |
|                   | #                | Represents any single numeric character             | 2#5 finds 205, 215, 225, 235, 245, 255, 265, 275, 285, and 295 |

### IN Operator

Allows you to specify multiple values in a `WHERE` clause.

Shorthand for multiple `OR` conditions.

```sql
SELECT column_name(s)
FROM table_name
WHERE column_name IN (value1, value2, ...)
```

We can also use `SELECT` within `IN`:

```sql
SELECT column
.. _name(s)
FROM table_name
WHERE column_name IN (SELECT STATEMENT);
```

### BETWEEN Operator

Selects values within a given range (inclusive). The values can be numbers, text, or dates.

```sql
SELECT column_name(s)
FROM table_name
WHERE column_name BETWEEN value1 AND value2;
```

### Aliases

Used to give a table, or a column in a table, a temporary name.

Often used to make column names more readable.

Only exist for the duration of the query.

```sql
SELECT column_name AS alias_name
FROM table_name;
```

```sql
SELECT column_name(s)
FROM table_name AS alias_name;
```

### JOIN Clause

Used to combine rows from two or more tables, based on a related column between them.

The following example uses an `INNER JOIN` to select records that have matching CustomerID values in both tables, and then produce a table containing OrderID, CustomerName, and OrderDate columns.

```sql
SELECT Orders.OrderID, Customers.CustomerID, Orders.OrderDate
FROM Orders
INNER JOIN Customers ON Orders.CustomerID=Customers.CustomerID;
```

Four different types of `JOIN`s in SQL:

1. (INNER) JOIN: Returns records that have matching values in both tables.
2. LEFT (OUTER) JOIN: Returns all records from the left table, and the matched records from the right table.
3. RIGHT (OUTER) JOIN: Returns all records from the right table, and the matched records from the left table.
4. FULL (OUTER) JOIN: Returns all records when there is a match in either left or right table.

To `JOIN` Three Tables:

```sql
SELECT Orders.OrderID, Customers.CustomerName, Shippers.ShipperName
FROM ((Orders
INNER JOIN Customers ON Orders.CustomerID = Customers.CustomerID)
INNER JOIN Shippers ON Orders.ShipperID = Shippers.ShipperID);
```

The above example selects all orders with customer and shipper information.

### Self JOIN

A regular join, but the table is joined with itself.

```sql
SELECT column_name(s)
FROM table1 T1, table1 T2
WHERE condition;
```

Note that T1 and T2 are table aliases for the same table.

For example, the following matches customers from the same city:

```sql
SELECT A.CustomerName AS CustomerName1, B.CustomerName AS CustomerName2, A.City
FROM Customers A, Customers B
WHERE A.CustomerID <> B.CustomerID
AND A.City = B.City
ORDER BY A.City;
```

### UNION Operator

Used to combine the result-set of two or more SELECT statements.

- Each SELECT statement within UNION must have the same number of columns
- The columns must also have similar data types
- The columns in each SELECT statement must also be in the same order

```sql
SELECT column_name(s) FROM table1
UNION
SELECT column_name(s) FROM table2;
```

The `UNION` operator selects only distinct values, whereas the `UNION ALL` operator allows duplicate values.

```sql
SELECT column_name(s) FROM table1
UNION ALL
SELECT column_name(s) FROM table2;
```

### GROUP BY Statement

Groups rows that have the same values into summary rows.

Often used with aggregate functions (`COUNT`,`MAX`,`MIN`,`SUM`,`AVG`) to group the result-set by one or more columns.

```sql
SELECT column_name(s)
FROM table_name
WHERE condition
GROUP BY column_name(s)
ORDER BY column_name(s);
```

For example, to list the number of customers in each country and sort from high to low:

```sql
SELECT COUNT(CustomerID), Country
FROM Customers
GROUP BY Country
ORDER BY COUNT(CustomerID) DESC;
```

### HAVING Clause

Added to SQL because the WHERE keyword could not be used with aggregate functions.

```sql
SELECT column_name(s)
FROM table_name
WHERE condition
GROUP BY column_name(s)
HAVING condition
ORDER BY column_name(s);
```

For example, to list the number of customers in each country that has more than 5 customers:

```sql
SELECT COUNT(CustomerID), Country
FROM Customers
GROUP BY Country
HAVING COUNT(CustomerID) > 5;
```

### EXISTS Operator

Used to test for the existence of any record in a subquery.

Returns true if the subquery returns one or more records.

```sql
SELECT column_name(s)
FROM table_name
WHERE EXISTS
(SELECT column_name FROM table_name WHERE condition);
```

For example, to return `TRUE` and list the suppliers with a product price less than 20:

```sql
SELECT SupplierName
FROM Suppliers
WHERE EXISTS (SELECT ProductName FROM Products WHERE Products.SupplierID = Suppliers.supplierID AND Price < 20);
```

### ANY and ALL Operators

Used with a `WHERE` or `HAVING` clause.

The `ANY` operator returns true if any of the subquery values meet the condition.

```sql
SELECT column_name(s)
FROM table_name
WHERE column_name operator ANY
(SELECT column_name FROM table_name WHERE condition);
```

The `ALL` operator returns true if all of the subquery values meet the condition.

```sql
SELECT column_name(s)
FROM table_name
WHERE column_name operator ALL
(SELECT column_name FROM table_name WHERE condition);
```

`operator` must be a standard comparison operator (`=`,`<>`,`>`,`>=`,`<`,`<=`)

### SELECT INTO Statement

Copies data from one table into a new table.

```sql
SELECT column1, column2, column3, ...
INTO newtable [IN externaldb]
FROM oldtable
WHERE condition;
```

For example, the following copies only the German customers into a new table:

```sql
SELECT * INTO CustomersGermany
FROM Customers
WHERE Country = 'Germany';
```

To create a new empty table using the schema of another, add a `WHERE` clause that causes the query to return no data:

```sql
SELECT * INTO newtable
FROM oldtable
WHERE 1 = 0;
```

### INSERT INTO SELECT Statement

Copies data from one table and inserts it into another table.

- Requires that data types in source and target tables match
- Existing records in the target table are unaffected

To copy all columns from one table to another table:

```sql
INSERT INTO table2
SELECT * FROM table1
WHERE condition;
```

To copy only some columns from one table into another table:

```sql
INSERT INTO table2 (column1, column2, column3, ...)
SELECT column1, column2, column3, ...
FROM table1
WHERE condition;
```

### CASE Statement

Goes through conditions and returns a value when the first condition is met.

If no conditions are true, it returns `NULL`.

```sql
CASE
  WHEN condition1 THEN result1
  WHEN condition2 THEN result2
  WHEN condition3 THEN result3
  ELSE result
END
```

For example, the following orders customers by City, but if city is `NULL`, then it orders by Country.

### Stored Procedure

Prepared SQL code that you can save, so the code can be reused over and over again.

You can also pass parameters to a stored procedure.

```sql
CREATE PROCEDURE procedure_name
AS
sql_statement
GO;
```

Execute:

```sql
EXEC procedure_name;
```

### CREATE DATABASE Statement

Used to create a new SQL database.

```sql
CREATE DATABASE databasename
```

### DROP DATABASE Statement

Used to drop an existing SQL database.

```sql
DROP DATABASE databasename;
```

### BACKUP DATABASE Statement

Used in SQL Server to create a full back up of an existing SQL database.

```sql
BACKUP DATABASE databasename
TO DISK = 'filepath';
```

To only back up the parts of the database that have changed since the last full database backup, use the `WITH DIFFERENTIAL STATEMENT`:

```sql
BACKUP DATABASE databasename
TO DISK = 'filepath';
WITH DIFFERENTIAL
```

### CREATE TABLE Statement

Used to create a new table in a database.

```sql
CREATE TABLE table_name (
  column1 datatype,
  column2 datatype,
  column3 datatype,
  ...
);
```

The w3schools Data Type reference can be found [here](https://www.w3schools.com/sql/sql_datatypes.asp)

### DROP TABLE Statement

Used to drop an existing table in a database.

```sql
DROP TABLE table_name;
```

### TRUNCATE TABLE Statement

Used to delete the data inside a table, but not the table itself.

```sql
TRUNCATE TABLE table_name;
```

### ALTER TABLE Statement

Used to add, delete, or modify columns in an existing table.

To add a column:

```sql
ALTER TABLE table_name
ADD column_name datatype;
```

To delete a column (some database systems don't allow for this)

```sql
ALTER TABLE table_name
DROP COLUMN column_name
```

To change the data type of a column in a table (some use `MODIFY`, others use `ALTER`):

```sql
ALTER TABLE table_name
MODIFY|ALTER COLUMN column_name datatype
```

### Create Constraints

Used to specify rules for the data in the table.

Used to limit the type of data that can go into a table. Action is aborted if constraint is violated by action.

Can be column level or table level.

Can be specified when the table is created with the `CREATE TABLE` statement, or after with the `ALTER TABLE` statement.

```sql
CREATE TABLE table_name (
    column1 datatype constraint,
    column2 datatype constraint,
    column3 datatype constraint,
    ...
);
```

Common constraints:

- [NOT NULL](https://www.w3schools.com/sql/sql_notnull.asp) - Ensures that a column cannot have a NULL value
- [UNIQUE](https://www.w3schools.com/sql/sql_unique.asp) - Ensures that all values in a column are different
- [PRIMARY KEY](https://www.w3schools.com/sql/sql_primarykey.asp) - A combination of a NOT NULL and UNIQUE. Uniquely identifies each row in a table
- [FOREIGN KEY](https://www.w3schools.com/sql/sql_foreignkey.asp) - Uniquely identifies a row/record in another table
- [CHECK](https://www.w3schools.com/sql/sql_check.asp) - Ensures that all values in a column satisfies a specific condition
- [DEFAULT](https://www.w3schools.com/sql/sql_default.asp) - Sets a default value for a column when no value is specified
- [INDEX](https://www.w3schools.com/sql/sql_create_index.asp) - Used to create and retrieve data from the database very quickly

### PRIMARY KEY and FOREIGN KEY Constraints

The `PRIMARY KEY` constraint uniquely identifies each record in a table.

Primary keys must contain `UNIQUE` values, and cannot contain `NULL` values.

A table can have only ONE primary key; and in the table, this primary key can consist of single or multiple columns (fields).

A `FOREIGN KEY` is a key used to link two tables together.

A `FOREIGN KEY` is a field (or collection of fields) in one table that refers to the `PRIMARY KEY` in another table.

The table containing the foreign key is called the child table, and the table containing the candidate key is called the referenced or parent table.

The `FOREIGN KEY` constraint is used to prevent actions that would destroy links between tables.

The `FOREIGN KEY` constraint also prevents invalid data from being inserted into the foreign key column, because it has to be one of the values contained in the table it points to.

### CREATE INDEX Statement

Used to create indexes in tables.

Indexes are used to retrieve data more quickly than otherwise. The user cannot see the indexes, they are just used to speed up searches/queries.

```sql
CREATE INDEX index_name
ON table_name (column1, column2, ...);
```

To disallow duplicate values, we use a `UNIQUE` index:

```sql
CREATE UNIQUE INDEX index_name
ON table_name (column1, column2, ...);
```

We can also delete an index on a table. On MS Access:

```sql
DROP INDEX index_name ON table_name;
```

### AUTO INCREMENT Field

Allows a unique number to be generated whena new record is insterted into a table.

Often this is the primary key field that we would like to be created every time a new record is inserted.

For example (MySQL Syntax):

```sql
CREATE TABLE Persons (
    Personid int NOT NULL AUTO_INCREMENT,
    LastName varchar(255) NOT NULL,
    FirstName varchar(255),
    Age int,
    PRIMARY KEY (Personid)
);
```

import DefaultLayout from '../../../layouts/index'

export default DefaultLayout
